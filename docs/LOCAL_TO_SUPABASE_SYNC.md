# æœ¬åœ°æ•¸æ“šåŒæ­¥åˆ° Supabase æŒ‡å—

é€™å€‹å·¥å…·å¯ä»¥å¹«åŠ©æ‚¨å°‡æœ¬åœ°é–‹ç™¼çš„æ•¸æ“šå¿«é€ŸåŒæ­¥åˆ° Supabaseï¼Œå¯¦ç¾ç„¡ç¸«çš„é–‹ç™¼å’Œéƒ¨ç½²æµç¨‹ã€‚

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. æœ¬åœ°é–‹ç™¼éšæ®µ
```bash
# å•Ÿå‹•æœ¬åœ°é–‹ç™¼æœå‹™å™¨
npm run dev

# åœ¨ç€è¦½å™¨ä¸­è¨ªå• http://localhost:3000
# ä½¿ç”¨æœ¬åœ°æ¨¡å¼é€²è¡Œé–‹ç™¼å’Œæ¸¬è©¦
```

### 2. å‚™ä»½æœ¬åœ°æ•¸æ“š
```bash
# ç”Ÿæˆå‚™ä»½è…³æœ¬
npm run backup-local-data generate

# åœ¨ç€è¦½å™¨æ§åˆ¶å°åŸ·è¡Œå‚™ä»½è…³æœ¬
# 1. æ‰“é–‹é–‹ç™¼è€…å·¥å…· (F12)
# 2. è¤‡è£½ä¸¦åŸ·è¡Œ backup-script.js ä¸­çš„ä»£ç¢¼
# 3. ä¸‹è¼‰çš„ JSON æ–‡ä»¶æœƒè‡ªå‹•ä¿å­˜
# 4. å°‡æ–‡ä»¶é‡å‘½åç‚º local-storage-backup.json ä¸¦æ”¾åˆ°é …ç›®æ ¹ç›®éŒ„
```

### 3. åŒæ­¥åˆ° Supabase
```bash
# è™•ç†å‚™ä»½æ–‡ä»¶ä¸¦ç”Ÿæˆ SQL è…³æœ¬
npm run sync-local-to-supabase

# é‡ç½® Supabase æ•¸æ“šåº«
npm run reset-supabase

# éƒ¨ç½²åˆ° Supabase
npm run deploy-supabase
```

## ğŸ“‹ è©³ç´°æ­¥é©Ÿ

### æ­¥é©Ÿ 1: æœ¬åœ°é–‹ç™¼
1. ç¢ºä¿ `VITE_USE_SUPABASE=0` åœ¨ `.env.local` ä¸­
2. å•Ÿå‹•æœ¬åœ°é–‹ç™¼æœå‹™å™¨ï¼š`npm run dev`
3. åœ¨æœ¬åœ°æ¨¡å¼ä¸‹å‰µå»ºå’Œæ¸¬è©¦æ‚¨çš„æ•¸æ“š
4. ç¢ºä¿æ‰€æœ‰åŠŸèƒ½éƒ½æ­£å¸¸å·¥ä½œ

### æ­¥é©Ÿ 2: æ•¸æ“šå‚™ä»½
1. é‹è¡Œï¼š`npm run backup-local-data generate`
2. åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹æ‚¨çš„æ‡‰ç”¨
3. æŒ‰ F12 æ‰“é–‹é–‹ç™¼è€…å·¥å…·
4. è¤‡è£½ `backup-script.js` ä¸­çš„ä»£ç¢¼åˆ°æ§åˆ¶å°ä¸¦åŸ·è¡Œ
5. ä¸‹è¼‰çš„å‚™ä»½æ–‡ä»¶æœƒè‡ªå‹•ä¿å­˜åˆ° Downloads æ–‡ä»¶å¤¾
6. å°‡æ–‡ä»¶é‡å‘½åç‚º `local-storage-backup.json` ä¸¦ç§»å‹•åˆ°é …ç›®æ ¹ç›®éŒ„

### æ­¥é©Ÿ 3: ç’°å¢ƒæº–å‚™
1. ç¢ºä¿ `.env.local` åŒ…å«æ­£ç¢ºçš„ Supabase é…ç½®ï¼š
   ```
   VITE_SUPABASE_URL=your_supabase_url
   VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
   VITE_USE_SUPABASE=1
   ```

### æ­¥é©Ÿ 4: æ•¸æ“šåŒæ­¥
1. é‹è¡Œï¼š`npm run sync-local-to-supabase`
2. è…³æœ¬æœƒç”Ÿæˆ `supabase/sync-local-data.sql`
3. é‹è¡Œï¼š`npm run reset-supabase` é‡ç½®æ•¸æ“šåº«
4. é‹è¡Œï¼š`npm run deploy-supabase` éƒ¨ç½²è®Šæ›´

### æ­¥é©Ÿ 5: æ¸¬è©¦é©—è­‰
1. é‡æ–°å•Ÿå‹•é–‹ç™¼æœå‹™å™¨ï¼š`npm run dev`
2. ç¢ºèª `VITE_USE_SUPABASE=1` å·²è¨­ç½®
3. æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ
4. æª¢æŸ¥è¨‚å–®ç·¨è™Ÿæ˜¯å¦ç‚º `OD11362` æ ¼å¼

## ğŸ”§ è…³æœ¬èªªæ˜

### backup-local-data
- `npm run backup-local-data generate` - ç”Ÿæˆç€è¦½å™¨å‚™ä»½è…³æœ¬
- `npm run backup-local-data process` - è™•ç†å‚™ä»½æ–‡ä»¶

### sync-local-to-supabase
- è®€å– `local-storage-backup.json`
- ç”Ÿæˆå°æ‡‰çš„ SQL æ’å…¥è…³æœ¬
- è‡ªå‹•è™•ç†è¨‚å–®ç·¨è™Ÿæ ¼å¼ï¼ˆOD11362+ï¼‰

### reset-supabase
- é‡ç½® Supabase æ•¸æ“šåº«åˆ°åˆå§‹ç‹€æ…‹
- æ¸…é™¤æ‰€æœ‰ç¾æœ‰æ•¸æ“š

### deploy-supabase
- å°‡æœ¬åœ°è®Šæ›´æ¨é€åˆ° Supabase
- åŸ·è¡Œæ‰€æœ‰é·ç§»è…³æœ¬

## ğŸ“Š æ”¯æ´çš„æ•¸æ“šé¡å‹

- âœ… ç”¢å“ (products)
- âœ… è¨‚å–® (orders) - è‡ªå‹•ç”Ÿæˆ OD11362+ ç·¨è™Ÿ
- âœ… æŠ€å¸« (technicians)
- âœ… å®¢æˆ¶ (customers)
- âœ… æœƒå“¡ (members)
- âœ… é€šçŸ¥ (notifications)
- âœ… å›å ± (reports)
- âœ… åº«å­˜ (inventory)
- âœ… ä¿ƒéŠ· (promotions)
- âœ… æ–‡ä»¶ (documents)
- âœ… æ©Ÿå‹ (models)

## âš ï¸ æ³¨æ„äº‹é …

1. **æ•¸æ“šå‚™ä»½**ï¼šåŒæ­¥å‰è«‹ç¢ºä¿å·²å‚™ä»½é‡è¦æ•¸æ“š
2. **ç’°å¢ƒè®Šæ•¸**ï¼šç¢ºä¿ Supabase ç’°å¢ƒè®Šæ•¸æ­£ç¢ºè¨­ç½®
3. **è¨‚å–®ç·¨è™Ÿ**ï¼šåŒæ­¥å¾Œè¨‚å–®ç·¨è™Ÿæœƒå¾ OD11362 é–‹å§‹
4. **UUID è½‰æ›**ï¼šæœ¬åœ° ID æœƒè‡ªå‹•è½‰æ›ç‚º Supabase UUID
5. **æ¸¬è©¦é©—è­‰**ï¼šåŒæ­¥å¾Œå‹™å¿…æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å•é¡Œï¼šå‚™ä»½æ–‡ä»¶è®€å–å¤±æ•—
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. ç¢ºä¿å‚™ä»½æ–‡ä»¶æ ¼å¼æ­£ç¢ºï¼ˆJSONï¼‰
2. æª¢æŸ¥æ–‡ä»¶è·¯å¾‘æ˜¯å¦æ­£ç¢º
3. é‡æ–°åŸ·è¡Œå‚™ä»½è…³æœ¬

### å•é¡Œï¼šSupabase é€£æ¥å¤±æ•—
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. æª¢æŸ¥ç’°å¢ƒè®Šæ•¸æ˜¯å¦æ­£ç¢º
2. ç¢ºèª Supabase é …ç›®ç‹€æ…‹
3. æª¢æŸ¥ç¶²çµ¡é€£æ¥

### å•é¡Œï¼šè¨‚å–®ç·¨è™Ÿæ ¼å¼éŒ¯èª¤
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. ç¢ºä¿å·²åŸ·è¡Œæœ€æ–°çš„é·ç§»è…³æœ¬
2. æª¢æŸ¥ `generate_order_number()` å‡½æ•¸
3. é‡æ–°åŸ·è¡Œæ•¸æ“šåº«é‡ç½®

## ğŸ“ æ”¯æ´

å¦‚æœé‡åˆ°å•é¡Œï¼Œè«‹æª¢æŸ¥ï¼š
1. æ§åˆ¶å°éŒ¯èª¤ä¿¡æ¯
2. Supabase æ—¥èªŒ
3. ç¶²çµ¡é€£æ¥ç‹€æ…‹
4. ç’°å¢ƒè®Šæ•¸é…ç½®

---

**æç¤º**ï¼šå»ºè­°åœ¨æ¯æ¬¡é‡è¦æ›´æ–°å¾Œéƒ½é€²è¡Œå‚™ä»½ï¼Œä»¥ç¢ºä¿æ•¸æ“šå®‰å…¨ã€‚
