# Smoke Test（部署後 5 分鐘內可完成）

## 基礎功能驗證

### 認證與帳號
- [ ] 登入／記住帳號／首次改密碼
- [ ] 技師申請（同 email 重送應被拒絕）→ 審核通過 → 不再回到 pending
- [ ] 客服申請 → 審核通過 → 出現在 staff 名冊 → 重設密碼成功

### 訂單管理
- [ ] 訂單：開空白單→儲存→刪除（二次確認）→ 取消（理由）→ confirmed 後不可刪
- [ ] 訂單：指派技師（跳排班挑可用）→ 回填 → 簽名技師選擇 → 開工/完工時間記錄
- [ ] 訂單：照片壓 ≤200KB、最多 20 張
- [ ] 列表：平台色塊、ID 搜尋、區域欄

### 排班系統
- [ ] 技師排班：過去日期不可異動；休假申請功能正常
- [ ] 客服排班：月曆顏色圖例；Admin 可檢視全部
- [ ] 指派功能：從訂單跳轉排班頁面，選擇技師後返回訂單
- [ ] 簽名技師：從已指派技師中選擇，電話自動帶入

### 管理功能
- [ ] 產品/庫存/活動/文件/機型：新增/編輯/刪除（二次確認）
- [ ] 薪資：區域→技師篩選；客服只看自己
- [ ] 通知：發送與未讀徽章

### 行動裝置
- [ ] 手機技師：全功能可用；漢堡不覆蓋內容

## Supabase 模式快測（VITE_USE_SUPABASE=1）

### 連線測試
- [ ] 環境變數檢查：VITE_SUPABASE_URL 和 VITE_SUPABASE_ANON_KEY 正確設定
- [ ] 連線健康檢查：能正常連接到 Supabase
- [ ] 錯誤處理：連線失敗時自動回退到本地模式

### 資料同步
- [ ] 訂單列表可正常載入（`orders` 表已有資料時）
- [ ] 新增訂單成功寫入 Supabase（回到列表可見）
- [ ] 切回 `VITE_USE_SUPABASE=0` 時，localStorage 模式仍可運作

### 性能優化
- [ ] 節流功能：搜尋和篩選操作有適當延遲
- [ ] 快取機制：重複查詢使用快取
- [ ] 清單/詳情同步：資料更新後即時反映

## 錯誤修復驗證

### 400/404 錯誤
- [ ] Supabase 環境變數缺失時不報錯
- [ ] 連線失敗時優雅降級到本地模式
- [ ] API 錯誤有適當的錯誤處理

### 指派/簽名/休假功能
- [ ] 技師指派流程完整：訂單 → 排班 → 選擇 → 返回
- [ ] 簽名技師從已指派中選擇
- [ ] 休假申請功能正常運作
- [ ] 排班衝突檢查正確

### 資料一致性
- [ ] 本地模式和雲端模式資料格式一致
- [ ] 切換模式時資料不丟失
- [ ] 同步機制正常工作

## 部署檢查清單

### 環境設定
- [ ] VITE_USE_SUPABASE 環境變數正確設定
- [ ] Supabase 專案已建立並配置
- [ ] 資料庫遷移已執行
- [ ] RLS 政策已設定

### 建置部署
- [ ] npm run build 成功
- [ ] 部署到 Netlify/Vercel 成功
- [ ] 環境變數在部署平台正確設定
- [ ] 域名和 SSL 證書正常

### 監控與日誌
- [ ] 錯誤日誌正常記錄
- [ ] 性能監控正常
- [ ] 用戶行為追蹤正常